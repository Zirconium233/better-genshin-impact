<ui:FluentWindow x:Class="BetterGenshinImpact.View.Windows.LlmConfigDialog"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 xmlns:emoji="clr-namespace:Emoji.Wpf;assembly=Emoji.Wpf"
                 Width="700"
                 Height="800"
                 MinWidth="600"
                 MinHeight="600"
                 ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
                 ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                 ExtendsContentIntoTitleBar="True"
                 FontFamily="{DynamicResource TextThemeFontFamily}"
                 ResizeMode="CanResize"
                 WindowBackdropType="Mica"
                 WindowStartupLocation="CenterOwner"
                 mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <ui:TitleBar Title="LLMè°ƒåº¦å™¨é…ç½®" Grid.Row="0">
            <ui:TitleBar.Icon>
                <ui:ImageIcon Source="pack://application:,,,/Resources/Images/logo.png" />
            </ui:TitleBar.Icon>
        </ui:TitleBar>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="20">
                <!-- æ ‡é¢˜å’Œè¯´æ˜Ž -->
                <emoji:TextBlock Text="ðŸ¤– LLMè°ƒåº¦å™¨é…ç½®" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               Margin="0,0,0,10" />
                
                <emoji:TextBlock Text="é…ç½®LLMè°ƒåº¦å™¨çš„å‚æ•°å’Œç”¨æˆ·æŒ‡ä»¤" 
                               FontSize="14" 
                               Margin="0,0,0,20" 
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}" />

                <!-- ç”¨æˆ·æŒ‡ä»¤åŒºåŸŸ -->
                <Border Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="15"
                        Margin="0,0,0,20">
                    <StackPanel>
                        <emoji:TextBlock Text="ðŸ’¬ ç”¨æˆ·æŒ‡ä»¤"
                                       FontWeight="Bold"
                                       FontSize="16"
                                       Margin="0,0,0,10" />

                        <emoji:TextBlock Text="promptï¼š"
                                       FontSize="14"
                                       Margin="0,0,0,8" />
                        
                        <TextBox Name="UserPromptTextBox"
                                 Height="80"
                                 TextWrapping="Wrap"
                                 AcceptsReturn="True"
                                 VerticalScrollBarVisibility="Auto"
                                 FontSize="13"
                                 Padding="10"
                                 Text="å¸®æˆ‘æˆ˜æ–—ï¼Œä¼˜å…ˆä½¿ç”¨å…ƒç´ æŠ€èƒ½å’Œå…ƒç´ çˆ†å‘" />
                        
                        <emoji:TextBlock Text="ðŸ’¡ ç¤ºä¾‹ï¼šå¸®æˆ‘æˆ˜æ–—ã€æŽ¢ç´¢è¿™ä¸ªåŒºåŸŸã€æ”¶é›†ææ–™ã€å®Œæˆä»»åŠ¡ç­‰" 
                                       FontSize="12" 
                                       Margin="0,8,0,0" 
                                       FontStyle="Italic"
                                       Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}" />
                    </StackPanel>
                </Border>

                <!-- è®°å¿†å’ŒPrompté…ç½® -->
                <Border Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="15"
                        Margin="0,0,0,20">
                    <StackPanel>
                        <emoji:TextBlock Text="ðŸ§  è®°å¿†å’ŒPrompté…ç½®" 
                                       FontWeight="Bold" 
                                       FontSize="16" 
                                       Margin="0,0,0,15" />
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!-- è®°å¿†æ¨¡å¼ -->
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="è®°å¿†æ¨¡å¼:" VerticalAlignment="Center" Margin="0,0,10,8" />
                            <ComboBox Name="MemoryModeComboBox" Grid.Row="0" Grid.Column="1" Margin="0,0,0,8">
                                <ComboBoxItem Content="SingleFrame" IsSelected="False" />
                                <ComboBoxItem Content="NearDense" IsSelected="True" />
                                <ComboBoxItem Content="Agent" IsSelected="False" />
                            </ComboBox>

                            <!-- Promptæ¨¡å¼ -->
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Promptæ¨¡å¼:" VerticalAlignment="Center" Margin="0,0,10,8" />
                            <ComboBox Name="PromptModeComboBox" Grid.Row="1" Grid.Column="1" Margin="0,0,0,8">
                                <ComboBoxItem Content="General" IsSelected="True" />
                                <ComboBoxItem Content="Combat" IsSelected="False" />
                                <ComboBoxItem Content="Exploration" IsSelected="False" />
                            </ComboBox>

                            <!-- å¯ç”¨æ€è€ƒè¿‡ç¨‹ -->
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="å¯ç”¨æ€è€ƒè¿‡ç¨‹:" VerticalAlignment="Center" Margin="0,0,10,8" />
                            <CheckBox Name="EnableThoughtCheckBox" Grid.Row="2" Grid.Column="1" Margin="0,0,0,8" />

                            <!-- è¾“å‡ºé•¿åº¦æŽ§åˆ¶ -->
                            <TextBlock Grid.Row="3" Grid.Column="0" Text="è¾“å‡ºé•¿åº¦æŽ§åˆ¶:" VerticalAlignment="Center" Margin="0,0,10,8" />
                            <ComboBox Name="OutputLengthComboBox" Grid.Row="3" Grid.Column="1" Margin="0,0,0,8">
                                <ComboBoxItem Content="Variable" IsSelected="True" />
                                <ComboBoxItem Content="Fixed3" IsSelected="False" />
                                <ComboBoxItem Content="Fixed5" IsSelected="False" />
                            </ComboBox>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- è§¦å‘å™¨é…ç½® -->
                <Border Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="15"
                        Margin="0,0,0,20">
                    <StackPanel>
                        <emoji:TextBlock Text="âš¡ è§¦å‘å™¨é…ç½®" 
                                       FontWeight="Bold" 
                                       FontSize="16" 
                                       Margin="0,0,0,15" />
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!-- è°ƒç”¨è§¦å‘å™¨ -->
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="è°ƒç”¨è§¦å‘å™¨:" VerticalAlignment="Center" Margin="0,0,10,8" />
                            <ComboBox Name="CallTriggerComboBox" Grid.Row="0" Grid.Column="1" Margin="0,0,0,8">
                                <ComboBoxItem Content="ActionGroupCompleted" IsSelected="True" />
                                <ComboBoxItem Content="QueueRemaining" IsSelected="False" />
                                <ComboBoxItem Content="FixedInterval" IsSelected="False" />
                            </ComboBox>

                            <!-- ç»“æŸè§¦å‘å™¨ -->
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="ç»“æŸè§¦å‘å™¨:" VerticalAlignment="Center" Margin="0,0,10,8" />
                            <ComboBox Name="EndTriggerComboBox" Grid.Row="1" Grid.Column="1" Margin="0,0,0,8">
                                <ComboBoxItem Content="LlmExit" IsSelected="True" />
                                <ComboBoxItem Content="EnvException" IsSelected="False" />
                                <ComboBoxItem Content="LlmExit,EnvException" IsSelected="False" />
                            </ComboBox>

                            <!-- å›ºå®šé—´éš”ï¼ˆç§’ï¼‰ -->
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="å›ºå®šé—´éš”ï¼ˆç§’ï¼‰:" VerticalAlignment="Center" Margin="0,0,10,8" />
                            <ui:NumberBox Name="FixedIntervalNumberBox" Grid.Row="2" Grid.Column="1" Margin="0,0,0,8" 
                                         Value="5" Minimum="1" Maximum="60" />
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- APIå‚æ•°é…ç½® -->
                <Border Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="15"
                        Margin="0,0,0,20">
                    <StackPanel>
                        <emoji:TextBlock Text="ðŸ”§ APIå‚æ•°é…ç½®" 
                                       FontWeight="Bold" 
                                       FontSize="16" 
                                       Margin="0,0,0,15" />
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!-- æœ€å¤§Tokenæ•° -->
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="æœ€å¤§Tokenæ•°:" VerticalAlignment="Center" Margin="0,0,10,8" />
                            <ui:NumberBox Name="MaxTokensNumberBox" Grid.Row="0" Grid.Column="1" Margin="0,0,0,8" 
                                         Value="1000" Minimum="100" Maximum="4000" />

                            <!-- æ¸©åº¦å‚æ•° -->
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="æ¸©åº¦å‚æ•°:" VerticalAlignment="Center" Margin="0,0,10,8" />
                            <ui:NumberBox Name="TemperatureNumberBox" Grid.Row="1" Grid.Column="1" Margin="0,0,0,8" 
                                         Value="0.7" Minimum="0" Maximum="2" SmallChange="0.1" />

                            <!-- è¿‘æœŸå¸§æ•° -->
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="è¿‘æœŸå¸§æ•°:" VerticalAlignment="Center" Margin="0,0,10,8" />
                            <ui:NumberBox Name="RecentFrameCountNumberBox" Grid.Row="2" Grid.Column="1" Margin="0,0,0,8" 
                                         Value="3" Minimum="1" Maximum="10" />

                            <!-- è¿œæœŸé—´éš” -->
                            <TextBlock Grid.Row="3" Grid.Column="0" Text="è¿œæœŸé—´éš”:" VerticalAlignment="Center" Margin="0,0,10,8" />
                            <ui:NumberBox Name="DistantFrameIntervalNumberBox" Grid.Row="3" Grid.Column="1" Margin="0,0,0,8"
                                         Value="2" Minimum="1" Maximum="10" />
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- æŒ‰é’®åŒºåŸŸ -->
                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Right"
                            Margin="0,20,0,0">
                    <ui:Button Name="BtnCancel"
                               Content="å–æ¶ˆ"
                               Margin="0,0,10,0"
                               Padding="20,8"
                               Click="BtnCancelClick" />
                    
                    <ui:Button Name="BtnOk"
                               Content="ç¡®å®š"
                               Appearance="Primary"
                               Padding="20,8"
                               IsDefault="True"
                               Click="BtnOkClick" />
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</ui:FluentWindow>
